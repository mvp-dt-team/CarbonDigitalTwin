# MVP ПО для ЦД ПАН-УВ
## Содержание репозитория
- [Модуль сбора данных с датчиков производства](CDMODULE/)
- [Модуль хранения данных](SDMODULE/)
- [Модуль машинного обучения](MLMODULE/)
- [Договоренности по интеграции модуля хранения с другими модулями (НЕ АКТУАЛЬНО)](storage_module_integration.md)

## Принцип работы
Данные попадают в цифровой двойник из модуля считывания данных с датчиков.
После они сохраняются в базу данных (MySQL) и используются модулем машинного обучения для предсказания заданных пользователем характеристик волокна, основываясь на технологических режимах производства и данных неразрушающих методов потокового контроля.
В составе ПО имеется 4 модуля: 
- Модуль хранения данных/Storage data Module(SDMODULE)
- Модуль сбора данных с датчиков производства/Collection data module(CDMODULE)
- Модуль машинного обучения/Machine learning module(MLMODULE)
- Веб-интерфейс для управления работой микросервисов и получения данных (DTINTERFACE)

Все модули написаны на Python версии 3.12.4 с использованием opensource библиотек, которые приведены в requirements.txt файлах каждого модуля.

## TODO
### Контейнеризация
1. Приведение структуры каждой папки к следующей:

```  
project_module/  
│  
├── Dockerfile  
├── requirements.txt  
├── app.py  
├── src/  
│ ├── __init__.py  
│ ├── python_module1.py  
│ └── python_module2.py  
├── tests/  
│ ├── __init__.py  
│ └── test_module1.py  
├── README.md  
└── .dockerignore  
``` 
- **Dockerfile**: файл с инструкциями для сборки Docker образа.  
- **requirements.txt**: файл со списком зависимостей Python.  
- **app.py**: основной файл приложения, который запускает микросервис.  
- **src/**: директория с исходным кодом приложения.  
- **tests/**: директория с тестами.  
- **README.md**: документация для микросервиса.  
- **.dockerignore**: файл, указывающий Docker, какие файлы и папки игнорировать при копировании в контейнер.  

2. Написание Dockerfile для каждого модуля с использованием базового образа [3.12.4-bullseye](https://github.com/docker-library/python/blob/0d5638323cb325f17caa71bbee67db68bd194edc/3.12/bullseye/Dockerfile) или [3.12.4-slim-bullseye](https://github.com/docker-library/python/blob/0d5638323cb325f17caa71bbee67db68bd194edc/3.12/slim-bullseye/Dockerfile)
3. Написание .dockerignore
4. Реализация алгоритма создания образов:

```bash   
cd path/to/service  
docker build -t service:latest .  
docker run -d --name service_container -p 5003:5000 service:latest  
```
### Модуль сбора данных (CDMODULE):
1. Удаление лишних файлов, которые использовались для тестирования
2. Приведение структуры организации файлов приложения к структуре, которая была описана выше
3. Написание юнит тестов для покрытия кода
4. Окончательная доработка конфига
5. Написание документации по запуску и работе модуля
6. Написание документации для обработки ошибок

### Модуль машинного (MLMODULE):

Доработка приведена в основном  [readme файле](MLMODULE/README.md) модуля

### Модуль хранения данных (SDMODULE):
1. Удаление лишних файлов, которые использовались для тестирования
2. Приведение структуры организации файлов приложения к структуре, которая была описана выше
3. Окончательная доработка конфига
4. Написание документации по запуску и работе модуля
5. Написание документации для обработки ошибок